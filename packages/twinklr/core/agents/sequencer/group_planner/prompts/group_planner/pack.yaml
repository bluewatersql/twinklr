pack_id: group_planner.v2
version: 2.0.0
description: Group-level planning prompts for GroupPlanner agent

templates:
  system: system.j2
  user: user.j2
  developer: developer.j2

variables:
  required:
    - audio_profile  # AudioProfileModel with song analysis
    - macro_plan  # MacroPlan with strategic guidance
    - display_group  # DisplayGroupRef for this group
    - available_templates  # List of template IDs from catalog
    - response_schema  # JSON schema for GroupPlan (auto-injected)
    - taxonomy  # Dict of enum names to value lists (auto-injected)
  
  optional:
    - lyric_context  # LyricContextModel with narrative/thematic analysis (None if no lyrics)
    - iteration  # Current iteration number (int, default: 1)
    - feedback  # Judge feedback from previous iteration (str)
    - max_layers  # Max layers allowed (int, default: 3)
    - max_effects_per_section  # Max effects per section (int, default: 8)

metadata:
  agent_type: group_planner
  output_schema: GroupPlan
  supports_iteration: true
  max_iterations: 3
