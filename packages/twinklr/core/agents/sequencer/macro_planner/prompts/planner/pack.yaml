pack_id: macro_planner.v2
pack_version: "1.0"
agent_id: macro_planner.v2

description: >
  Prompt pack for MacroPlanner agent that generates high-level choreography plans
  from AudioProfileModel. Creates section-level strategy with template selections,
  layer usage, and creative objectives.

templates:
  system: system.j2
  developer: developer.j2
  user: user.j2

variables:
  response_schema:
    source: runtime
    description: Auto-injected from MacroPlan.model_json_schema()
  
  audio_profile:
    source: runtime
    description: AudioProfileModel from Phase 1 agent
  
  iteration:
    source: runtime
    description: Current iteration number (1-based)
    default: 1
  
  max_iterations:
    source: runtime
    description: Maximum iterations allowed
    default: 5
  
  feedback:
    source: runtime
    description: Formatted feedback from judge (if iteration > 1)
    default: null

metadata:
  created_at: "2026-01-30"
  author: "Twinklr V2 Team"
  tags: ["macro", "planning", "choreography", "judge-based"]
  prompt_structure: "three-part"
  iteration_support: true
